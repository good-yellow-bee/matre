# MATRE Environment Configuration
# Copy to .env and configure for your environment
#
# ==========================================
# REQUIRED VARIABLES - Must be set for app to work
# ==========================================

###> symfony/framework-bundle ###
APP_ENV=dev
APP_SECRET=change-me-minimum-32-characters
###< symfony/framework-bundle ###

###> doctrine/doctrine-bundle ###
DB_DRIVER=pdo_mysql
DB_HOST=127.0.0.1
DB_PORT=3306
DB_NAME=matre
DB_USER=root
DB_PASS=
DB_VERSION=mariadb-11.4.0
DB_CHARSET=utf8mb4
# Doctrine uses individual DB_* vars directly (see config/packages/doctrine.yaml)
###< doctrine/doctrine-bundle ###

###> symfony/routing ###
DEFAULT_URI=https://matre.local
###< symfony/routing ###

###> symfony/messenger ###
MESSENGER_TRANSPORT_DSN=doctrine://default?auto_setup=0
###< symfony/messenger ###

###> symfony/mailer ###
# Email - Local dev uses Mailpit (configured in docker-compose.yml)
# Production examples:
#   smtp://user:pass@smtp.example.com:587
#   gmail+smtp://user:pass@default
#   sendgrid+smtp://apikey:SG.your-key-here@default
# To send external emails from local dev, set to production SMTP
MAILER_DSN=smtp://mailpit:1025
###< symfony/mailer ###

###> symfony/lock ###
LOCK_DSN=flock
###< symfony/lock ###

# ==========================================
# TEST AUTOMATION - Configure test module source
# ==========================================

###> matre/test-automation ###
# Test Module Repository (any Magento module with MFTF/Playwright tests)
TEST_MODULE_REPO=git@github.com:org/magento-module.git
TEST_MODULE_BRANCH=main
TEST_MODULE_PATH=app/code/Vendor/Module

# Dev mode: use local module path instead of git clone (leave empty for git clone)
# Set to relative or absolute path, e.g.: ./test-module or /path/to/module
DEV_MODULE_PATH=

# Repository credentials (for HTTPS repos, leave empty for SSH)
REPO_USERNAME=
REPO_PASSWORD=

# Selenium Grid
SELENIUM_HOST=selenium-hub
SELENIUM_PORT=4444

# Live Browser Preview (noVNC)
# URL for noVNC viewer - watch tests execute in real-time
# Default uses APP_DOMAIN with port 7900 (HTTP - noVNC doesn't support SSL directly)
NOVNC_URL=http://localhost:7900
# Disable VNC password for dev (set to false for prod, password: "secret")
SE_VNC_NO_PASSWORD=true

# Allure Reports
ALLURE_URL=http://allure:5050
ALLURE_PUBLIC_URL=http://localhost:5050

# Magento (minimal install for MFTF/Allure only)
# Supported versions: 2.4.6, 2.4.7 (2.4.6 recommended for MFTF compatibility)
MAGENTO_ROOT=/var/www/html
MAGENTO_VERSION=2.4.6

# Magento Marketplace credentials (for composer repo.magento.com)
# Get from: https://marketplace.magento.com/customer/accessKeys/
MAGENTO_PUBLIC_KEY=
MAGENTO_PRIVATE_KEY=

# Notifications (optional)
SLACK_WEBHOOK_URL=
###< matre/test-automation ###

# ==========================================
# OPTIONAL - Production SSL Configuration
# ==========================================

###> matre/ssl ###
# SSL Configuration (optional)
# Local dev: leave defaults, uses external Traefik with self-signed certs
# Production: set domain + email, run with -f docker-compose.prod.yml

# Application domain (for Traefik routing)
APP_DOMAIN=matre.local

# Let's Encrypt email (enables ACME when set)
LETSENCRYPT_EMAIL=

# Certificate resolver (set to 'letsencrypt' for production)
CERT_RESOLVER=
###< matre/ssl ###
# Trust reverse proxy (Traefik) for HTTPS detection
TRUSTED_PROXIES=REMOTE_ADDR
